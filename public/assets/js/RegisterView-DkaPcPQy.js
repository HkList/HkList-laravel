import{b as x,r as p,k as B,w as R,c as V,n as a,u as N,p as $,v as q,f as v,q as _,e as f,t as K,l as s,s as c,C as S,x as b,E as I,y as L,z as U,A,B as D}from"./.pnpm-CdrKUIM1.js";import{g as M,u as z,a as T,r as j}from"./index-Bhp4YFXi.js";import{f as G}from"./favicon-BrYC5Vmz.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"container"},O=["src"],P=x({__name:"RegisterView",setup(Q){const u=N();M()==="1"&&u.push("/admin");const k=()=>u.push("/login"),i=p(!1),o=p({username:"",password:"",inv_code:""}),r=p(null),g={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=z();w.config.need_inv_code&&(g.inv_code=[{required:!0,message:"请输入邀请码",trigger:"blur"}]);const n=async d=>{if(!(!d||!await d.validate()))try{i.value=!0,await j({username:o.value.username,password:o.value.password,inv_code:o.value.inv_code}),I.success("注册成功"),u.push("/login")}finally{i.value=!1}};return(d,e)=>{const m=L,l=U,y=A,C=D,E=$,F=q;return v(),B("div",J,[R((v(),V(E,null,{default:a(()=>[_("h1",null,[_("img",{src:f(G),alt:"logo"},null,8,O)]),_("h2",null,"注册 | "+K(f(T)()),1),s(C,{ref_key:"registerFormRef",ref:r,model:o.value,rules:g,"label-width":"auto"},{default:a(()=>[s(l,{label:"用户名",prop:"username"},{default:a(()=>[s(m,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t),onKeyup:e[1]||(e[1]=c(t=>n(r.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(l,{label:"密码",prop:"password"},{default:a(()=>[s(m,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.password=t),type:"password",onKeyup:e[3]||(e[3]=c(t=>n(r.value),["enter"]))},null,8,["modelValue"])]),_:1}),f(w).config.need_inv_code?(v(),V(l,{key:0,label:"邀请码",prop:"inv_code"},{default:a(()=>[s(m,{modelValue:o.value.inv_code,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.inv_code=t),onKeyup:e[5]||(e[5]=c(t=>n(r.value),["enter"]))},null,8,["modelValue"])]),_:1})):S("",!0),s(l,{class:"center"},{default:a(()=>[s(y,{type:"primary",onClick:e[6]||(e[6]=t=>k())},{default:a(()=>[b("登陆")]),_:1}),s(y,{type:"primary",onClick:e[7]||(e[7]=t=>n(r.value))},{default:a(()=>[b("注册")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[F,i.value]])])}}}),h=H(P,[["__scopeId","data-v-da197fbf"]]);export{h as default};

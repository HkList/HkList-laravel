import{g as _,a as v,l as g,s as w,b as C}from"./index-BjgW1GUm.js";import{f as y}from"./favicon-BrYC5Vmz.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */const x={class:"container"},b=["src"],h=Vue.defineComponent({__name:"LoginView",setup(k){const l=VueRouter.useRouter();_()==="1"&&l.push("/admin");const m=()=>l.push("/register"),n=Vue.ref(!1),t=Vue.ref({username:"",password:""}),r=Vue.ref(null),d={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},s=async a=>{if(!(!a||!await a.validate()))try{n.value=!0;const e=await g({username:t.value.username,password:t.value.password});ElementPlus.ElMessage.success("登陆成功"),w("1");const u=e.data.role;C(u),l.push(`/${u}`)}finally{n.value=!1}};return(a,e)=>{const u=Vue.resolveComponent("el-input"),i=Vue.resolveComponent("el-form-item"),V=Vue.resolveComponent("el-button"),p=Vue.resolveComponent("el-form"),c=Vue.resolveComponent("el-card"),f=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock("div",x,[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(c,null,{default:Vue.withCtx(()=>[Vue.createElementVNode("h1",null,[Vue.createElementVNode("img",{src:Vue.unref(y),alt:"logo"},null,8,b)]),Vue.createElementVNode("h2",null,"登陆 | "+Vue.toDisplayString(Vue.unref(v)()),1),Vue.createVNode(p,{ref_key:"loginFormRef",ref:r,model:t.value,rules:d,"label-width":"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(i,{label:"用户名",prop:"username"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.username=o),onKeyup:e[1]||(e[1]=Vue.withKeys(o=>s(r.value),["enter"]))},null,8,["modelValue"])]),_:1}),Vue.createVNode(i,{label:"密码",prop:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.password=o),type:"password",onKeyup:e[3]||(e[3]=Vue.withKeys(o=>s(r.value),["enter"]))},null,8,["modelValue"])]),_:1}),Vue.createVNode(i,{class:"center"},{default:Vue.withCtx(()=>[Vue.createVNode(V,{type:"primary",onClick:e[4]||(e[4]=o=>m())},{default:Vue.withCtx(()=>[Vue.createTextVNode("注册")]),_:1}),Vue.createVNode(V,{type:"primary",onClick:e[5]||(e[5]=o=>s(r.value))},{default:Vue.withCtx(()=>[Vue.createTextVNode("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[f,n.value]])])}}}),$=N(h,[["__scopeId","data-v-76f977eb"]]);export{$ as default};

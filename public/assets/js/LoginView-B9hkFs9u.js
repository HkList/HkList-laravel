import{b as F,r as d,j as x,w as B,c as L,m as a,n as R,p as C,v as $,e as f,q as _,u as g,t as N,k as s,s as v,x as w,E as q,y as I,z as K,A as S,B as A}from"./.pnpm-fc_Lr1wI.js";import{g as D,a as U,l as j,s as z,b as M}from"./index-B6Bk_CPg.js";import{f as T}from"./favicon-BrYC5Vmz.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"container"},H=["src"],J=F({__name:"LoginView",setup(O){const r=R();D()==="1"&&r.push("/admin");const y=()=>r.push("/register"),u=d(!1),o=d({username:"",password:""}),n=d(null),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},i=async m=>{if(!(!m||!await m.validate()))try{u.value=!0;const e=await j({username:o.value.username,password:o.value.password});q.success("登陆成功"),z("1");const l=e.data.role;M(l),r.push(`/${l}`)}finally{u.value=!1}};return(m,e)=>{const l=I,p=K,c=S,b=A,k=C,E=$;return f(),x("div",G,[B((f(),L(k,null,{default:a(()=>[_("h1",null,[_("img",{src:g(T),alt:"logo"},null,8,H)]),_("h2",null,"登陆 | "+N(g(U)()),1),s(b,{ref_key:"loginFormRef",ref:n,model:o.value,rules:V,"label-width":"auto"},{default:a(()=>[s(p,{label:"用户名",prop:"username"},{default:a(()=>[s(l,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.username=t),onKeyup:e[1]||(e[1]=v(t=>i(n.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(p,{label:"密码",prop:"password"},{default:a(()=>[s(l,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.password=t),type:"password",onKeyup:e[3]||(e[3]=v(t=>i(n.value),["enter"]))},null,8,["modelValue"])]),_:1}),s(p,{class:"center"},{default:a(()=>[s(c,{type:"primary",onClick:e[4]||(e[4]=t=>y())},{default:a(()=>[w("注册")]),_:1}),s(c,{type:"primary",onClick:e[5]||(e[5]=t=>i(n.value))},{default:a(()=>[w("登陆")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[E,u.value]])])}}}),Y=h(J,[["__scopeId","data-v-76f977eb"]]);export{Y as default};

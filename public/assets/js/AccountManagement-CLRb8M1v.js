import{i as m}from"./index-BJ_J5BpX.js";import{f as S}from"./format-DaCfCw6f.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P=a=>m.post("/admin/account",a),F=a=>m.get(`/admin/account?page=${a.page}&size=${a.size}`),L=a=>m.patch(`/admin/account/${a.id}`,a),I=a=>m.patch("/admin/account/info",{account_ids:[a.id]}),R=a=>m.patch("/admin/account/info",{account_ids:a}),j=a=>m.delete("/admin/account",{data:{account_ids:[a.id]}}),q=a=>m.delete("/admin/account",{data:{account_ids:a}}),D=a=>m.patch("/admin/account/switch",a),G=Vue.defineComponent({__name:"AddAccount",props:{modelValue:{},modelModifiers:{}},emits:Vue.mergeModels(["getAccounts"],["update:modelValue"]),setup(a,{emit:n}){const v=n,_=Vue.useModel(a,"modelValue"),p=Vue.ref(!1),c=Vue.ref({type:1,cookie:""}),V=Vue.ref(null),g={cookie:[{required:!0,message:"请输入账户信息",trigger:"blur"}]},N=async k=>{if(!(!k||!await k.validate()))try{p.value=!0,(await P(c.value)).data.have_repeat&&ElementPlus.ElMessage.info("存在重复的账号,已自动过滤"),ElementPlus.ElMessage.success("添加成功")}finally{p.value=!1}},x=k=>{v("getAccounts"),k()},h=()=>{_.value=!1,v("getAccounts")};return(k,d)=>{const B=Vue.resolveComponent("el-text"),r=Vue.resolveComponent("el-form-item"),y=Vue.resolveComponent("el-option"),C=Vue.resolveComponent("el-select"),l=Vue.resolveComponent("el-input"),o=Vue.resolveComponent("el-form"),i=Vue.resolveComponent("el-button"),u=Vue.resolveComponent("el-dialog"),f=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createBlock(u,{title:"添加账号",width:"60%",modelValue:_.value,"onUpdate:modelValue":d[5]||(d[5]=s=>_.value=s),"before-close":x},{footer:Vue.withCtx(()=>[Vue.createVNode(i,{type:"info",onClick:d[3]||(d[3]=s=>h())},{default:Vue.withCtx(()=>[Vue.createTextVNode("取消")]),_:1}),Vue.createVNode(i,{type:"primary",onClick:d[4]||(d[4]=s=>N(V.value))},{default:Vue.withCtx(()=>[Vue.createTextVNode("添加")]),_:1})]),default:Vue.withCtx(()=>[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(o,{ref_key:"addAccountFormRef",ref:V,model:c.value,rules:g,"label-width":"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(r,{label:"提示"},{default:Vue.withCtx(()=>[Vue.createVNode(B,null,{default:Vue.withCtx(()=>[Vue.createTextVNode("可以使用换行来分割多个账号")]),_:1})]),_:1}),Vue.createVNode(r,{label:"账号类型"},{default:Vue.withCtx(()=>[Vue.createVNode(C,{modelValue:c.value.type,"onUpdate:modelValue":d[0]||(d[0]=s=>c.value.type=s)},{default:Vue.withCtx(()=>[Vue.createVNode(y,{label:"cookie",value:1}),Vue.createVNode(y,{label:"token",value:2})]),_:1},8,["modelValue"])]),_:1}),c.value.type===1?(Vue.openBlock(),Vue.createBlock(r,{key:0,label:"Cookie",prop:"cookie"},{default:Vue.withCtx(()=>[Vue.createVNode(l,{type:"textarea",modelValue:c.value.cookie,"onUpdate:modelValue":d[1]||(d[1]=s=>c.value.cookie=s)},null,8,["modelValue"])]),_:1})):(Vue.openBlock(),Vue.createBlock(r,{key:1,label:"refresh_token",prop:"cookie"},{default:Vue.withCtx(()=>[Vue.createVNode(l,{type:"textarea",modelValue:c.value.cookie,"onUpdate:modelValue":d[2]||(d[2]=s=>c.value.cookie=s)},null,8,["modelValue"])]),_:1}))]),_:1},8,["model"])),[[f,p.value]])]),_:1},8,["modelValue"])}}}),H={key:0},J={key:0},K={key:0},O={key:0},Q={key:0},W={key:0},X={key:0},Y={key:0},Z={key:0},ee=Vue.defineComponent({__name:"AccountManagement",setup(a){const n=Vue.ref(!1),v=Vue.ref(15),_=Vue.ref(1),p=Vue.ref(),c=Vue.ref([]),V=async()=>{try{n.value=!0;const l=await F({page:_.value,size:v.value});p.value=l.data}finally{n.value=!1}},g=async l=>{try{n.value=!0,await I(l),ElementPlus.ElMessage.success("更新账户信息成功")}finally{n.value=!1,await V()}},N=async()=>{try{n.value=!0;const l=c.value.map(o=>o.id);await R(l),ElementPlus.ElMessage.success("批量更新账户成功")}finally{n.value=!1,await V()}},x=async l=>{try{n.value=!0,await j(l),ElementPlus.ElMessage.success("删除账户成功")}finally{n.value=!1,await V()}},h=async()=>{try{n.value=!0;const l=c.value.map(o=>o.id);await q(l),ElementPlus.ElMessage.success("批量删除账户成功")}finally{n.value=!1,await V()}},k=async()=>{try{n.value=!0;const l=c.value.map(o=>o.id);await D({account_ids:l,switch:1}),ElementPlus.ElMessage.success("批量启用账户成功")}finally{n.value=!1,await V()}},d=async()=>{try{n.value=!0;const l=c.value.map(o=>o.id);await D({account_ids:l,switch:0}),ElementPlus.ElMessage.success("批量禁用账户成功")}finally{n.value=!1,await V()}},B=l=>c.value=l;Vue.onMounted(V);const r=Vue.ref(!1),y=()=>r.value=!r.value,C=async l=>{if(l.edit=!l.edit,l.edit===!1)try{n.value=!0,await L(l),ElementPlus.ElMessage.success("修改賬號成功")}finally{n.value=!1,await V()}};return(l,o)=>{var A,w,E;const i=Vue.resolveComponent("el-button"),u=Vue.resolveComponent("el-table-column"),f=Vue.resolveComponent("el-input"),s=Vue.resolveComponent("el-option"),b=Vue.resolveComponent("el-select"),U=Vue.resolveComponent("el-switch"),T=Vue.resolveComponent("el-table"),z=Vue.resolveComponent("el-pagination"),$=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(G,{onGetAccounts:V,modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},null,8,["modelValue"]),Vue.createVNode(i,{type:"primary",onClick:o[1]||(o[1]=e=>V())},{default:Vue.withCtx(()=>[Vue.createTextVNode("刷新列表")]),_:1}),Vue.createVNode(i,{type:"primary",onClick:o[2]||(o[2]=e=>y())},{default:Vue.withCtx(()=>[Vue.createTextVNode("添加账号")]),_:1}),Vue.createVNode(i,{type:"primary",disabled:c.value.length<=0,onClick:o[3]||(o[3]=e=>N())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 批量更新信息 ")]),_:1},8,["disabled"]),Vue.createVNode(i,{type:"primary",disabled:c.value.length<=0,onClick:o[4]||(o[4]=e=>k())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 批量启用 ")]),_:1},8,["disabled"]),Vue.createVNode(i,{type:"primary",disabled:c.value.length<=0,onClick:o[5]||(o[5]=e=>d())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 批量禁用 ")]),_:1},8,["disabled"]),Vue.createVNode(i,{type:"danger",disabled:c.value.length<=0,onClick:o[6]||(o[6]=e=>h())},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 批量删除 ")]),_:1},8,["disabled"]),Vue.withDirectives((Vue.openBlock(),Vue.createBlock(T,{data:((A=p.value)==null?void 0:A.data)??[],border:"","show-overflow-tooltip":"",class:"table",onSelectionChange:B,"table-layout":"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{type:"selection",fixed:"",width:"40"}),Vue.createVNode(u,{prop:"id",label:"ID"}),Vue.createVNode(u,{prop:"baidu_name",label:"百度用户名"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",H,Vue.toDisplayString(e.baidu_name),1)),e.edit?(Vue.openBlock(),Vue.createBlock(f,{key:1,modelValue:e.baidu_name,"onUpdate:modelValue":t=>e.baidu_name=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"today_size",label:"今日解析"},{default:Vue.withCtx(({row:e})=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.today_count)+" ("+Vue.toDisplayString(Vue.unref(S)(e.today_size??0))+")",1)]),_:1}),Vue.createVNode(u,{prop:"today_size",label:"总共解析"},{default:Vue.withCtx(({row:e})=>[Vue.createElementVNode("span",null,Vue.toDisplayString(e.total_count)+" ("+Vue.toDisplayString(Vue.unref(S)(e.total_size??0))+")",1)]),_:1}),Vue.createVNode(u,{prop:"account_type",label:"账号类型"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",J,Vue.toDisplayString(e.account_type),1)),e.edit?(Vue.openBlock(),Vue.createBlock(b,{key:1,modelValue:e.account_type,"onUpdate:modelValue":t=>e.account_type=t},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(["cookie","access_token"],t=>Vue.createVNode(s,{key:t,value:t},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"access_token",label:"access_token"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",K,Vue.toDisplayString(e.access_token),1)),e.edit?(Vue.openBlock(),Vue.createBlock(f,{key:1,modelValue:e.access_token,"onUpdate:modelValue":t=>e.access_token=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"refresh_token",label:"refresh_token"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",O,Vue.toDisplayString(e.refresh_token),1)),e.edit?(Vue.openBlock(),Vue.createBlock(f,{key:1,modelValue:e.refresh_token,"onUpdate:modelValue":t=>e.refresh_token=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"cookie",label:"Cookie"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",Q,Vue.toDisplayString(e.cookie),1)),e.edit?(Vue.openBlock(),Vue.createBlock(f,{key:1,modelValue:e.cookie,"onUpdate:modelValue":t=>e.cookie=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"vip_type",label:"会员类型"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",W,Vue.toDisplayString(e.vip_type),1)),e.edit?(Vue.openBlock(),Vue.createBlock(b,{key:1,modelValue:e.vip_type,"onUpdate:modelValue":t=>e.vip_type=t},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(["超级会员","假超级会员","普通会员","普通用户"],t=>Vue.createVNode(s,{key:t,value:t},{default:Vue.withCtx(()=>[Vue.createTextVNode(Vue.toDisplayString(t),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"switch",label:"状态"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",X,Vue.toDisplayString(e.switch?"启用":"禁用"),1)),e.edit?(Vue.openBlock(),Vue.createBlock(U,{key:1,modelValue:e.switch,"onUpdate:modelValue":t=>e.switch=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"prov",label:"省份"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",Y,Vue.toDisplayString(e.prov??"未使用"),1)),e.edit?(Vue.openBlock(),Vue.createBlock(b,{key:1,modelValue:e.prov,"onUpdate:modelValue":t=>e.prov=t},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(s,{key:null,value:null},{default:Vue.withCtx(()=>[Vue.createTextVNode("未使用")]),_:1})),(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(["北京市","天津市","上海市","重庆市","河北省","山西省","内蒙古自治区","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","广西壮族自治区","海南省","四川省","贵州省","云南省","西藏自治区","陕西省","甘肃省","青海省","宁夏回族自治区","新疆维吾尔自治区","香港特别行政区","澳门特别行政区","台湾省"],t=>Vue.createVNode(s,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"reason",label:"禁用原因"},{default:Vue.withCtx(({row:e})=>[e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("span",Z,Vue.toDisplayString(e.reason??"未禁用"),1)),e.edit?(Vue.openBlock(),Vue.createBlock(f,{key:1,modelValue:e.reason,"onUpdate:modelValue":t=>e.reason=t},null,8,["modelValue","onUpdate:modelValue"])):Vue.createCommentVNode("",!0)]),_:1}),Vue.createVNode(u,{prop:"svip_end_at",label:"超级会员结束时间"},{default:Vue.withCtx(({row:e})=>[Vue.createTextVNode(Vue.toDisplayString(new Date(e.svip_end_at).toLocaleString()),1)]),_:1}),Vue.createVNode(u,{prop:"last_use_at",label:"上次使用时间"},{default:Vue.withCtx(({row:e})=>[Vue.createTextVNode(Vue.toDisplayString(new Date(e.last_use_at).toLocaleString()),1)]),_:1}),Vue.createVNode(u,{prop:"created_at",label:"创建时间"},{default:Vue.withCtx(({row:e})=>[Vue.createTextVNode(Vue.toDisplayString(new Date(e.created_at).toLocaleString()),1)]),_:1}),Vue.createVNode(u,{prop:"updated_at",label:"更新时间"},{default:Vue.withCtx(({row:e})=>[Vue.createTextVNode(Vue.toDisplayString(new Date(e.updated_at).toLocaleString()),1)]),_:1}),Vue.createVNode(u,{width:"220",label:"操作",fixed:"right"},{default:Vue.withCtx(({row:e})=>[Vue.createVNode(i,{size:"small",type:"primary",onClick:t=>g(e)},{default:Vue.withCtx(()=>[Vue.createTextVNode("更新信息")]),_:2},1032,["onClick"]),e.edit?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createBlock(i,{key:0,size:"small",type:"primary",onClick:t=>C(e)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 編輯 ")]),_:2},1032,["onClick"])),e.edit?(Vue.openBlock(),Vue.createBlock(i,{key:1,size:"small",type:"primary",onClick:t=>C(e)},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 完成 ")]),_:2},1032,["onClick"])):Vue.createCommentVNode("",!0),Vue.createVNode(i,{size:"small",type:"danger",onClick:t=>x(e)},{default:Vue.withCtx(()=>[Vue.createTextVNode("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,n.value]]),Vue.createVNode(z,{"current-page":_.value,"onUpdate:currentPage":o[7]||(o[7]=e=>_.value=e),"page-size":v.value,"onUpdate:pageSize":o[8]||(o[8]=e=>v.value=e),"page-sizes":[15,50,100,500,((w=p.value)==null?void 0:w.total)??100],total:((E=p.value)==null?void 0:E.total)??100,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:V,onCurrentChange:V},null,8,["current-page","page-size","page-sizes","total"])],64)}}}),ae=M(ee,[["__scopeId","data-v-d41d0cc4"]]);export{ae as default};

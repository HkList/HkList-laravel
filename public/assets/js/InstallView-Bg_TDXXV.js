import{i as g,a as C}from"./index-BjgW1GUm.js";import{f as y}from"./favicon-BrYC5Vmz.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css              */const x=a=>g.post("/install",a),h=a=>(Vue.pushScopeId("data-v-c77698d2"),a=a(),Vue.popScopeId(),a),S={class:"container"},k=["src"],L={key:0},M=h(()=>Vue.createElementVNode("p",null,"您的后台登录账号密码均为:admin,请及时登录修改!",-1)),Q=Vue.defineComponent({__name:"InstallView",setup(a){const t=Vue.ref({db_connection:"mysql",db_host:"localhost",db_port:"3306",db_database:"94list-laravel",db_username:"94list-laravel",db_password:"",app_name:"94list-laravel"}),V=Vue.ref(null),i={db_connection:[{required:!0,message:"请选择安装方式",trigger:"change"}],db_host:[{required:!0,message:"请输入MySQL 数据库地址",trigger:"blur"}],db_port:[{required:!0,message:"请输入MySQL 端口",trigger:"blur"}],db_database:[{required:!0,message:"请输入MySQL 数据库名",trigger:"blur"}],db_username:[{required:!0,message:"请输入MySQL 用户名",trigger:"blur"}],app_name:[{required:!0,message:"请输入网站名称",trigger:"blur"}]},n=Vue.ref(!1),r=Vue.ref(!1),c=async d=>{if(!(!d||!await d.validate()))try{n.value=!0,await x(t.value),ElementPlus.ElMessage.success("安装成功!"),r.value=!0}finally{n.value=!1}},m=VueRouter.useRouter(),_=()=>m.push("/"),b=()=>m.push("/login");return(d,e)=>{const s=Vue.resolveComponent("el-button"),u=Vue.resolveComponent("el-input"),o=Vue.resolveComponent("el-form-item"),p=Vue.resolveComponent("el-option"),v=Vue.resolveComponent("el-select"),f=Vue.resolveComponent("el-form"),N=Vue.resolveComponent("el-card");return Vue.openBlock(),Vue.createElementBlock("div",S,[Vue.createVNode(N,null,{default:Vue.withCtx(()=>[Vue.createElementVNode("h1",null,[Vue.createElementVNode("img",{src:Vue.unref(y),alt:"logo"},null,8,k)]),Vue.createElementVNode("h2",null,"安装 | "+Vue.toDisplayString(Vue.unref(C)()),1),r.value?(Vue.openBlock(),Vue.createElementBlock("h3",L,[M,Vue.createVNode(s,{type:"primary",onClick:e[0]||(e[0]=l=>_())},{default:Vue.withCtx(()=>[Vue.createTextVNode("访问首页")]),_:1}),Vue.createVNode(s,{type:"success",onClick:e[1]||(e[1]=l=>b())},{default:Vue.withCtx(()=>[Vue.createTextVNode("访问后台")]),_:1})])):Vue.createCommentVNode("",!0),Vue.createVNode(f,{ref_key:"installFormRef",ref:V,model:t.value,rules:i,disabled:r.value,"label-width":"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{label:"网站名称",prop:"app_name"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.app_name,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.app_name=l)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"数据库驱动",prop:"db_connection"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{modelValue:t.value.db_connection,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.db_connection=l),placeholder:"请选择数据库驱动"},{default:Vue.withCtx(()=>[Vue.createVNode(p,{label:"MySQL",value:"mysql"}),Vue.createVNode(p,{label:"SQLite",value:"sqlite"})]),_:1},8,["modelValue"])]),_:1}),t.value.db_connection==="mysql"?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createVNode(o,{label:"MySQL 数据库地址",prop:"db_host"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.db_host,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.db_host=l)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"MySQL 端口",prop:"db_port"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.db_port,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.db_port=l)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"MySQL 数据库名",prop:"db_database"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.db_database,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.db_database=l)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"MySQL 用户名",prop:"db_username"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.db_username,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.db_username=l)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"MySQL 密码",prop:"db_password"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:t.value.db_password,"onUpdate:modelValue":e[8]||(e[8]=l=>t.value.db_password=l)},null,8,["modelValue"])]),_:1})],64)):Vue.createCommentVNode("",!0),Vue.createVNode(o,{class:"center"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{type:"primary",onClick:e[9]||(e[9]=l=>c(V.value)),loading:n.value},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 安装 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","disabled"])]),_:1})])}}}),I=w(Q,[["__scopeId","data-v-c77698d2"]]);export{I as default};

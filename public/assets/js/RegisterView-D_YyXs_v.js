import{b as x,r as d,k as B,w as C,c as w,n as s,u as R,p as N,v as q,f as m,q as p,e as c,t as S,l as a,B as I,s as V,E as L,x as U,y as A,z as D,A as M}from"./.pnpm-Ddnih9Rt.js";import{g as $,u as h,a as z,r as T}from"./index-B8uUd9en.js";import{f as j}from"./favicon-BrYC5Vmz.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"container"},J=["src"],K=x({__name:"RegisterView",setup(O){const l=R();$()==="1"&&l.push("/admin");const y=()=>l.push("/login"),n=d(!1),e=d({username:"",password:"",inv_code:""}),_=d(null),f={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},g=h();g.config.need_inv_code&&(f.inv_code=[{required:!0,message:"请输入邀请码",trigger:"blur"}]);const b=async u=>{if(!(!u||!await u.validate()))try{n.value=!0,await T({username:e.value.username,password:e.value.password,inv_code:e.value.inv_code}),L.success("注册成功"),l.push("/login")}finally{n.value=!1}};return(u,o)=>{const i=U,r=A,v=D,k=M,E=N,F=q;return m(),B("div",H,[C((m(),w(E,null,{default:s(()=>[p("h1",null,[p("img",{src:c(j),alt:"logo"},null,8,J)]),p("h2",null,"注册 | "+S(c(z)()),1),a(k,{ref_key:"registerFormRef",ref:_,model:e.value,rules:f,"label-width":"auto"},{default:s(()=>[a(r,{label:"用户名",prop:"username"},{default:s(()=>[a(i,{modelValue:e.value.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e.value.username=t)},null,8,["modelValue"])]),_:1}),a(r,{label:"密码",prop:"password"},{default:s(()=>[a(i,{modelValue:e.value.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.value.password=t),type:"password"},null,8,["modelValue"])]),_:1}),c(g).config.need_inv_code?(m(),w(r,{key:0,label:"邀请码",prop:"inv_code"},{default:s(()=>[a(i,{modelValue:e.value.inv_code,"onUpdate:modelValue":o[2]||(o[2]=t=>e.value.inv_code=t)},null,8,["modelValue"])]),_:1})):I("",!0),a(r,{class:"center"},{default:s(()=>[a(v,{type:"primary",onClick:o[3]||(o[3]=t=>y())},{default:s(()=>[V("登陆")]),_:1}),a(v,{type:"primary",onClick:o[4]||(o[4]=t=>b(_.value))},{default:s(()=>[V("注册")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})),[[F,n.value]])])}}}),Y=G(K,[["__scopeId","data-v-a420fdc8"]]);export{Y as default};

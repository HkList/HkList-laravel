import"./base-_Z90q_OM.js";import{E as P}from"./el-card-BgbFPBr2.js";import{E as U,a as C}from"./el-form-item-C5NMiDU5.js";import{E as h}from"./el-input-4DyiygPx.js";import"./el-popper-CyavG0r-.js";import{E as $,a as R}from"./el-select-tTX7WMZJ.js";import{E as N}from"./el-button--fR7yW34.js";import{e as z}from"./user-CfkXjEO3.js";import{a as y,g as B,e as m,c as _,n as E,u as l,h as D,i as v,j as T,d as j,r as w,k as A,b as t,w as r,m as H,p as b,q as g,F as O,t as G,v as J}from"./index-DIq-y8TX.js";import{f as K}from"./favicon-BrYC5Vmz.js";import{b as W,d as X,u as Y,_ as Z,w as ee,E as le}from"./request-CizaxWX-.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-DyPqMXJn.js";import"./_initCloneObject-B9VpDC3c.js";import"./focus-trap-B_JJ-imy.js";import"./strings-Dh8px6WY.js";import"./scroll-ChZz_5_d.js";const ae=W({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:X(String),default:"solid"}}),oe=y({name:"ElDivider"}),re=y({...oe,props:ae,setup(s){const p=s,i=Y("divider"),e=B(()=>i.cssVar({"border-style":p.borderStyle}));return(d,V)=>(m(),_("div",{class:E([l(i).b(),l(i).m(d.direction)]),style:T(l(e)),role:"separator"},[d.$slots.default&&d.direction!=="vertical"?(m(),_("div",{key:0,class:E([l(i).e("text"),l(i).is(d.contentPosition)])},[D(d.$slots,"default")],2)):v("v-if",!0)],6))}});var ne=Z(re,[["__file","divider.vue"]]);const se=ee(ne),de=j("InstallPannel",()=>{const s=w({db_connection:"",db_host:"localhost",db_port:"3306",db_database:"94list",db_username:"94list",db_password:"",app_name:"94list-laravel",app_url:"",admin_route_prefix:"/admin",pending:!1,installed:!1}),p=w(null);return{installForm:s,installFormRef:p}}),q=s=>(G("data-v-fd43252b"),s=s(),J(),s),ue={class:"container"},ie=["src"],pe=q(()=>b("h2",null,"就是加速",-1)),me={key:0},_e=q(()=>b("p",null,"您的后台登录账号密码均为:admin,请及时登录修改!",-1)),be=y({__name:"InstallPannel",setup(s){const p=H(),i=de(),{installForm:e,installFormRef:d}=A(i),V={db_connection:[{required:!0,message:"请选择安装方式",trigger:"change"}],db_host:[{required:!0,message:"请输入MySQL 数据库地址",trigger:"blur"}],db_port:[{required:!0,message:"请输入MySQL 端口",trigger:"blur"}],db_database:[{required:!0,message:"请输入MySQL 数据库名",trigger:"blur"}],db_username:[{required:!0,message:"请输入MySQL 用户名",trigger:"blur"}],db_password:[{required:!0,message:"请输入MySQL 密码",trigger:"blur"}],app_name:[{required:!0,message:"请输入网站名称",trigger:"blur"}],app_url:[{required:!0,message:"请输入网站url",trigger:"blur"}],admin_route_prefix:[{required:!0,message:"请输入后台登录路径",trigger:"blur"}]},I=async f=>{if(!f||!await f.validate(()=>{}))return;e.value.pending=!0;const a=await z({db_connection:e.value.db_connection,db_host:e.value.db_host,db_port:e.value.db_port,db_database:e.value.db_database,db_username:e.value.db_username,db_password:e.value.db_password,app_name:e.value.app_name,app_url:e.value.app_url,admin_route_prefix:e.value.admin_route_prefix})??"failed";e.value.pending=!1,a.toString()!=="failed"&&(le.success("安装成功!"),e.value.installed=!0)},L=()=>p.push("/"),M=()=>p.push("/login");return(f,a)=>{const c=N,S=$,Q=R,n=U,u=h,k=se,x=C,F=P;return m(),_("div",ue,[t(F,null,{default:r(()=>[b("h1",null,[b("img",{src:l(K),alt:"logo"},null,8,ie)]),pe,l(e).installed?(m(),_("h3",me,[_e,t(c,{type:"danger",onClick:a[0]||(a[0]=o=>L())},{default:r(()=>[g("访问首页")]),_:1}),t(c,{type:"success",onClick:a[1]||(a[1]=o=>M())},{default:r(()=>[g("访问后台")]),_:1})])):v("",!0),t(x,{ref_key:"installFormRef",ref:d,model:l(e),rules:V,disabled:l(e).installed,"label-width":"auto"},{default:r(()=>[t(n,{label:"数据库驱动",prop:"db_connection"},{default:r(()=>[t(Q,{modelValue:l(e).db_connection,"onUpdate:modelValue":a[2]||(a[2]=o=>l(e).db_connection=o),placeholder:"请选择数据库驱动"},{default:r(()=>[t(S,{label:"MySQL",value:"mysql"}),t(S,{label:"SQLite",value:"sqlite"})]),_:1},8,["modelValue"])]),_:1}),l(e).db_connection==="mysql"?(m(),_(O,{key:0},[t(n,{label:"MySQL 数据库地址",prop:"db_host"},{default:r(()=>[t(u,{modelValue:l(e).db_host,"onUpdate:modelValue":a[3]||(a[3]=o=>l(e).db_host=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"MySQL 端口",prop:"db_port"},{default:r(()=>[t(u,{modelValue:l(e).db_port,"onUpdate:modelValue":a[4]||(a[4]=o=>l(e).db_port=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"MySQL 数据库名",prop:"db_database"},{default:r(()=>[t(u,{modelValue:l(e).db_database,"onUpdate:modelValue":a[5]||(a[5]=o=>l(e).db_database=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"MySQL 用户名",prop:"db_username"},{default:r(()=>[t(u,{modelValue:l(e).db_username,"onUpdate:modelValue":a[6]||(a[6]=o=>l(e).db_username=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"MySQL 密码",prop:"db_password"},{default:r(()=>[t(u,{modelValue:l(e).db_password,"onUpdate:modelValue":a[7]||(a[7]=o=>l(e).db_password=o)},null,8,["modelValue"])]),_:1})],64)):v("",!0),t(k),t(n,{label:"网站名称",prop:"app_name"},{default:r(()=>[t(u,{modelValue:l(e).app_name,"onUpdate:modelValue":a[8]||(a[8]=o=>l(e).app_name=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"网站url",prop:"app_url"},{default:r(()=>[t(u,{modelValue:l(e).app_url,"onUpdate:modelValue":a[9]||(a[9]=o=>l(e).app_url=o)},null,8,["modelValue"])]),_:1}),t(n,{label:"后台登录路径",prop:"admin_route_prefix"},{default:r(()=>[t(u,{modelValue:l(e).admin_route_prefix,"onUpdate:modelValue":a[10]||(a[10]=o=>l(e).admin_route_prefix=o)},null,8,["modelValue"])]),_:1}),t(n,{class:"center"},{default:r(()=>[t(c,{type:"primary",onClick:a[11]||(a[11]=o=>I(l(d))),loading:l(e).pending},{default:r(()=>[g(" 安装 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","disabled"])]),_:1})])}}}),Pe=te(be,[["__scopeId","data-v-fd43252b"]]);export{Pe as default};

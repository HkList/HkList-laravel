import{i as s}from"./index-CbkZ6ACS.js";const w=()=>s.get("/admin/config/mail"),N=n=>s.patch("/admin/config/mail",n),b=n=>s.post("/admin/config/mail",n),M=Vue.defineComponent({__name:"ChangeMailConfig",setup(n){const r=Vue.ref(!1),l=Vue.ref({switch:!1,host:"",port:"",username:"",password:"",encryption:"tls",from_address:"",from_name:"",to_address:"",to_name:""}),d=Vue.ref(null),m={host:[{required:!0,message:"请输入SMTP服务器地址",trigger:"blur"}],port:[{required:!0,message:"请输入SMTP服务器端口",trigger:"blur"}],username:[{required:!0,message:"请输入SMTP服务器账户",trigger:"blur"}],password:[{required:!0,message:"请输入SMTP服务器密码",trigger:"blur"}],encryption:[{required:!0,message:"请选择SMTP服务器加密方式",trigger:"blur"}],from_address:[{required:!0,message:"请输入发件人地址",trigger:"blur"}],from_name:[{required:!0,message:"请输入发件人名称",trigger:"blur"}],to_address:[{required:!0,message:"请输入收件人地址",trigger:"blur"}],to_name:[{required:!0,message:"请输入收件人名称",trigger:"blur"}]},V=async()=>{try{r.value=!0;const a=await w();l.value=a.data}finally{r.value=!1}},p=async a=>{if(!(!a||!await a.validate()))try{r.value=!0,await N(l.value),ElementPlus.ElMessage.success("保存成功")}finally{r.value=!1,await V()}},f=async a=>{if(!(!a||!await a.validate()))try{r.value=!0,await b(l.value),ElementPlus.ElMessage.success("发送成功,请检查邮箱是否收到")}finally{r.value=!1}};return Vue.onMounted(V),(a,t)=>{const g=Vue.resolveComponent("el-switch"),o=Vue.resolveComponent("el-form-item"),u=Vue.resolveComponent("el-input"),c=Vue.resolveComponent("el-option"),v=Vue.resolveComponent("el-select"),i=Vue.resolveComponent("el-button"),_=Vue.resolveComponent("el-form"),C=Vue.resolveDirective("loading");return Vue.withDirectives((Vue.openBlock(),Vue.createBlock(_,{ref_key:"changeMailConfigFormRef",ref:d,model:l.value,rules:m,"label-width":"auto"},{default:Vue.withCtx(()=>[Vue.createVNode(o,{label:"是否开启",prop:"switch"},{default:Vue.withCtx(()=>[Vue.createVNode(g,{modelValue:l.value.switch,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.switch=e),size:"large"},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"SMTP服务器地址",prop:"host"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.host,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.host=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"SMTP服务器加密方式",prop:"encryption"},{default:Vue.withCtx(()=>[Vue.createVNode(v,{modelValue:l.value.encryption,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.encryption=e),placeholder:"选择加密方式"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(["tls","ssl"],e=>Vue.createVNode(c,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"SMTP服务器端口",prop:"port"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.port,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.port=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"SMTP服务器用户名",prop:"username"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.username,"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.username=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"SMTP服务器密码",prop:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.password,"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.password=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"发件人地址",prop:"from_address"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.from_address,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.from_address=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"发件人名称",prop:"from_name"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.from_name,"onUpdate:modelValue":t[7]||(t[7]=e=>l.value.from_name=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"收件人名称",prop:"to_name"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.to_name,"onUpdate:modelValue":t[8]||(t[8]=e=>l.value.to_name=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:"收件人地址",prop:"to_address"},{default:Vue.withCtx(()=>[Vue.createVNode(u,{modelValue:l.value.to_address,"onUpdate:modelValue":t[9]||(t[9]=e=>l.value.to_address=e)},null,8,["modelValue"])]),_:1}),Vue.createVNode(o,{label:" "},{default:Vue.withCtx(()=>[Vue.createVNode(i,{type:"primary",onClick:t[10]||(t[10]=e=>p(d.value))},{default:Vue.withCtx(()=>[Vue.createTextVNode("保存")]),_:1}),Vue.createVNode(i,{type:"primary",onClick:t[11]||(t[11]=e=>f(d.value))},{default:Vue.withCtx(()=>[Vue.createTextVNode(" 发送测试邮件 ")]),_:1})]),_:1})]),_:1},8,["model"])),[[C,r.value]])}}});export{M as default};

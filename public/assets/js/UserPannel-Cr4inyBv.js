function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/announceDialog-8OrbRC_x.js","assets/js/base-D_zbSILa.js","assets/js/index-DW4GyZFB.js","assets/css/index-gGiiOCIV.css","assets/js/request-Ckf9C3Wk.js","assets/css/base-DlbQ2Iwi.css","assets/js/el-overlay-Y8EFuDuN.js","assets/js/vnode-Dqtg7S9T.js","assets/js/focus-trap-BR6sfOYh.js","assets/js/scroll-DOTZrInm.js","assets/css/el-overlay-B1tu6YIU.css","assets/js/user-s5hreAlH.js","assets/js/getFileListForm-4tFwOJad.js","assets/js/el-loading-ByNmPrWo.js","assets/css/el-loading-Uv12lkco.css","assets/js/el-card-DyBxPdf8.js","assets/css/el-card-B0auzBUa.css","assets/js/el-form-item-DwZRVgh3.js","assets/js/use-form-item-BFFxkoHB.js","assets/js/_initCloneObject-DNAtcZvN.js","assets/css/el-form-item-Bbol9JFK.css","assets/js/el-button-DbmDJXiX.js","assets/css/el-button-km3Q5G_q.css","assets/js/el-input-CnT3n_X-.js","assets/css/el-input-DivjNiWg.css","assets/js/copy-DZMABk1k.js","assets/css/getFileListForm-DwDLgfOA.css","assets/js/showFileList-BGkqRi_H.js","assets/js/el-table-column-ith8tmxL.js","assets/js/el-popper-DbXAmeiq.js","assets/css/el-popper-4QbqRlLz.css","assets/css/el-table-column-DaMZUPDQ.css","assets/js/el-space-BYg-AO4D.js","assets/css/el-space-keklZC0K.css","assets/js/downloadDialog-C9aMiYQs.js","assets/js/el-text-DS_sqDKN.js","assets/css/el-text-BsakIiL3.css","assets/css/downloadDialog-DQuNdmJH.css","assets/js/aria2ConfigDialog-DPnr1b3k.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as V,r as t,l as T,s as D,a as j,o as I,c as U,b as f,u as g,F as x,e as G,f as v,_}from"./index-DW4GyZFB.js";import{d as M,a as N,b as z,c as B}from"./user-s5hreAlH.js";import{E as r}from"./request-Ckf9C3Wk.js";const q=V("UserPannel",()=>{const d=t({announce:"",announceSwitch:!1,debug:!1,haveAccount:!1,havePassword:!1,haveLogin:!1,userAgent:"",ishttps:document.location.protocol==="https:",pending:!1}),m=async()=>{d.value.pending=!0;const e=await M()??"failed";d.value.pending=!1,e.toString()!=="failed"&&(Object.assign(d.value,{...e.data,announce:e.data.announce.replace(/\[NextLine\]/g,"<br>")}),D(e.data.haveLogin?"1":"0"))},a=t({url:"",pwd:"",password:"",dir:"/",bd_user_id:null,pending:!1}),p=t(null),l=t([]),o=t({randsk:"",shareid:0,uk:0,sign:"",timestamp:0}),u=t([]),w=t(null),F=async(e,s)=>{a.value.dir=e,await h(s)},k=()=>{const e=a.value.dir.split("/");e.pop();const s=e.join("/");return s===""?"/":s},h=async(e="0",s=!1)=>{const i=await N({url:a.value.url,pwd:a.value.pwd,dir:a.value.dir,password:a.value.password})??"failed";if(i.toString()==="failed")return;const{message:c,data:n}=i;return r.success(c),Object.assign(o.value,{randsk:n.randsk,shareid:n.shareid,uk:n.uk}),l.value=n.list,a.value.dir!==null&&a.value.dir!==""&&a.value.dir!=="/"?l.value=[{isdir:"1",path:k(),server_filename:"..",size:"0",server_mtime:s?l.value[0].server_mtime:e},...n.list]:l.value=n.list,"success"},L=async()=>{const e=await z({uk:o.value.uk,shareid:o.value.shareid,password:a.value.password})??"failed";if(e.toString()==="failed")return;const{message:s,data:i}=e;r.success(s),Object.assign(o.value,i)},b=async e=>{const s=await B({fs_ids:Array.isArray(e)?e:[e],...o.value,password:a.value.password,bd_user_id:a.value.bd_user_id}).catch(async c=>{const{message:n}=c;n.includes("当前签名已过期")?(r.error(n),r.info("自动重新获取中..."),await P(p.value)):n.includes("您没有权限指定下载的用户")&&(D("0"),r.error("登陆已过期,请重新登陆"),location.reload())})??"failed";if(!s||s==="failed")return;const{data:i}=s;r.success("解析成功"),y.value=i,S.value=!0},P=async e=>{e&&await e.validate(()=>{})&&(a.value.pending=!0,await h("0",!0),await L(),a.value.pending=!1)},E=async()=>{a.value.pending=!0;let e=!1;if(u.value=u.value.filter(i=>{var n;if(e)return!1;const c=i.isdir=="1";return c&&(e=!0,r.error("暂不支持下载文件夹"),(n=w.value)==null||n.clearSelection()),!c}),e){a.value.pending=!1;return}const s=u.value.map(i=>i.fs_id);await b(s),a.value.pending=!1},y=t([]),S=t(!1),O=t([]),A=t(!1),C=t(T()),R=t(null);return{getConfig:m,getDir:F,getFileList:h,getFileSign:L,freshFileList:P,downloadFile:b,downloadFiles:E,clientConfig:d,getFileListForm:a,getFileListFormRef:p,filelist:l,requestParams:o,selectedRows:u,fileListTableRef:w,dlinkList:y,downloadDialogVisible:S,selectDownloadFiles:O,aria2ConfigForm:C,aria2ConfigDialogVisible:A,aria2ConfigFormRef:R,saveAria2Config:async e=>{e&&await e.validate(()=>{})&&(localStorage.setItem("aria2_config",JSON.stringify(C.value)),r.success("保存成功"),A.value=!1)}}}),J=j({__name:"UserPannel",setup(d){const m=v(()=>_(()=>import("./announceDialog-8OrbRC_x.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),a=v(()=>_(()=>import("./getFileListForm-4tFwOJad.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,15,16,17,18,19,20,21,22,23,24,25,11,26]))),p=v(()=>_(()=>import("./showFileList-BGkqRi_H.js"),__vite__mapDeps([27,1,2,3,4,5,13,14,15,16,28,29,19,8,18,30,31,32,7,33,11]))),l=v(()=>_(()=>import("./downloadDialog-C9aMiYQs.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,28,29,19,18,30,31,32,33,21,22,35,36,25,11,37]))),o=v(()=>_(()=>import("./aria2ConfigDialog-DPnr1b3k.js"),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,17,18,19,20,21,22,23,24,11]))),u=q();return I(u.getConfig),(w,F)=>(G(),U(x,null,[f(g(m)),f(g(a)),f(g(p)),f(g(l)),f(g(o))],64))}}),X=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{X as U,q as u};

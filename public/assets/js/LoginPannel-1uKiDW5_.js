import"./base-D_zbSILa.js";import{E as V}from"./el-card-DyBxPdf8.js";import{E as b,a as E}from"./el-form-item-DwZRVgh3.js";import{E as F}from"./el-button-DbmDJXiX.js";import{E as L}from"./el-input-CnT3n_X-.js";import{d as P,r as f,x as y,a as R,y as S,k,c as B,b as r,w as n,m as q,e as C,p as m,u as o,z as N,A as I,q as U,B as A,s as T}from"./index-DW4GyZFB.js";import{d as h}from"./admin-D3EntKcU.js";import{f as z}from"./favicon-BrYC5Vmz.js";import{E as D}from"./request-Ckf9C3Wk.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./use-form-item-BFFxkoHB.js";import"./_initCloneObject-DNAtcZvN.js";const $=P("LoginPannel",()=>{const d=f({prefix:y(),username:"",password:"",pending:!1}),t=f(null);return{loginForm:d,loginFormRef:t}}),j={class:"container"},G=["src"],H=R({__name:"LoginPannel",setup(d){const t=q();S()==="1"&&t.push("/admin");const g=$(),{loginForm:e,loginFormRef:p}=k(g),c={prefix:[{required:!0,message:"请输入路由前缀",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},_=async i=>{if(!i||!await i.validate(()=>{}))return;A(e.value.prefix),e.value.pending=!0;const a=await h({username:e.value.username,password:e.value.password})??"failed";e.value.pending=!1,a.toString()!=="failed"&&(e.value.username="",e.value.password="",D.success("登陆成功"),T("1"),t.push("/admin"))};return(i,a)=>{const u=L,l=b,x=F,w=E,v=V;return C(),B("div",j,[r(v,null,{default:n(()=>[m("h1",null,[m("img",{src:o(z),alt:"logo"},null,8,G)]),m("h2",null,N(o(I)()),1),r(w,{ref_key:"loginFormRef",ref:p,model:o(e),rules:c,"label-width":"auto"},{default:n(()=>[r(l,{label:"路由前缀",prop:"prefix"},{default:n(()=>[r(u,{modelValue:o(e).prefix,"onUpdate:modelValue":a[0]||(a[0]=s=>o(e).prefix=s)},null,8,["modelValue"])]),_:1}),r(l,{label:"用户名",prop:"username"},{default:n(()=>[r(u,{modelValue:o(e).username,"onUpdate:modelValue":a[1]||(a[1]=s=>o(e).username=s)},null,8,["modelValue"])]),_:1}),r(l,{label:"密码",prop:"password"},{default:n(()=>[r(u,{modelValue:o(e).password,"onUpdate:modelValue":a[2]||(a[2]=s=>o(e).password=s)},null,8,["modelValue"])]),_:1}),r(l,{class:"center"},{default:n(()=>[r(x,{type:"primary",onClick:a[3]||(a[3]=s=>_(o(p))),disabled:o(e).pending,loading:o(e).pending},{default:n(()=>[U(" 登陆 ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),ne=M(H,[["__scopeId","data-v-7d3c2ad4"]]);export{ne as default};
